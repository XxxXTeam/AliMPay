<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="支付宝扫码支付">
    <title>扫码支付 - AliMPay</title>
    <link rel="stylesheet" href="/static/css/payment.css">
</head>
<body>
    <div class="payment-container">
        <!-- Header -->
        <div class="payment-header">
            <div class="logo">💰</div>
            <h1>支付宝扫码支付</h1>
            <p>请使用支付宝APP扫描下方二维码完成支付</p>
        </div>

        <!-- Body -->
        <div class="payment-body">
            <!-- Order Information -->
            <div class="order-info">
                <div class="order-info-row">
                    <span class="order-info-label">订单号</span>
                    <span class="order-info-value"><code>{{.order.trade_no}}</code></span>
                </div>
                <div class="order-info-row">
                    <span class="order-info-label">商品名称</span>
                    <span class="order-info-value">{{.order.name}}</span>
                </div>
                <div class="order-info-row">
                    <span class="order-info-label">订单金额</span>
                    <span class="order-info-value">¥{{.order.amount}}</span>
                </div>
                <div class="order-info-row">
                    <span class="order-info-label">应付金额</span>
                    <span class="order-info-value amount">¥{{.order.payment_amount}}</span>
                </div>
                <div class="order-info-row">
                    <span class="order-info-label">创建时间</span>
                    <span class="order-info-value">{{.order.create_time}}</span>
                </div>
            </div>

            <!-- QR Code Section -->
            <div class="qrcode-section">
                <div class="qrcode-wrapper">
                    <img src="{{.qr_code_data}}" alt="支付二维码" id="paymentQRCode">
                </div>

                <div class="qrcode-tips">
                    <div class="tip-icon">💡</div>
                    <p><strong>支付提示：</strong></p>
                    <p>请务必支付准确金额：<strong style="color: #ff4d4f;">¥{{.order.payment_amount}}</strong></p>
                    <p>支付时无需填写备注信息</p>
                </div>
            </div>

            <!-- Instructions -->
            <div class="instructions">
                <h3>
                    <span>📋</span>
                    <span>支付步骤</span>
                </h3>
                <div class="instruction-step">
                    <div class="step-number">1</div>
                    <div class="step-text">打开支付宝APP，点击首页「扫一扫」</div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">2</div>
                    <div class="step-text">扫描上方二维码，输入金额 <strong>¥{{.order.payment_amount}}</strong></div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">3</div>
                    <div class="step-text">确认支付后，页面将自动跳转</div>
                </div>
            </div>

            <!-- Status Section -->
            <div class="status-section">
                <div class="status-indicator checking" id="statusIndicator">
                    <span class="status-text">正在检测支付状态...</span>
                </div>
                <div class="countdown">
                    请在 <span class="countdown-time" id="countdownTime">5:00</span> 内完成支付
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="payment-footer">
            <p>支付遇到问题？<a href="javascript:void(0)" onclick="contactSupport()">联系客服</a></p>
            <p style="margin-top: 8px; color: #00000040;">Powered by AliMPay · 安全支付保障</p>
        </div>
    </div>

    <!-- Hidden data for JavaScript -->
    <div style="display: none;">
        <div data-pid="{{.order.pid}}"></div>
    </div>

    <script src="/static/js/payment.js"></script>
    <script>
        function contactSupport() {
            alert('如需帮助，请联系商户客服\n\n订单号：{{.order.trade_no}}');
        }
    </script>
</body>
</html>

